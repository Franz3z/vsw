{"version":3,"file":"bundle.js","sources":["../src/firebase.js","../src/whiteboard.js"],"sourcesContent":["import { initializeApp } from \"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js\";\r\nimport { getDatabase, ref, set, onValue } from \"https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB5G7A9MDFgojI6sf86UNBgJWU2nLrzzD4\",\r\n  authDomain: \"virtual-student-workspace.firebaseapp.com\",\r\n  databaseURL: \"https://virtual-student-workspace-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"virtual-student-workspace\",\r\n  storageBucket: \"virtual-student-workspace.appspot.com\",\r\n  messagingSenderId: \"282960097196\",\r\n  appId: \"1:282960097196:web:95aeb40a96d78902ac5409\",\r\n  measurementId: \"G-9F77DKB2FH\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst database = getDatabase(app);\r\n\r\nexport { database, ref, set, onValue };\r\n","import { database, ref, set, onValue } from './firebase.js';\r\n\r\nconst canvas = document.getElementById('whiteboardCanvas');\r\nconst ctx = canvas.getContext('2d');\r\nlet drawing = false;\r\n\r\n// Draw line on canvas\r\nfunction drawLine(x0, y0, x1, y1, color = 'black', emit = true) {\r\n  ctx.strokeStyle = color;\r\n  ctx.beginPath();\r\n  ctx.moveTo(x0, y0);\r\n  ctx.lineTo(x1, y1);\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n\r\n  if (!emit) return;\r\n\r\n  const lineData = { x0, y0, x1, y1, color };\r\n  set(ref(database, 'whiteboard/last_line'), lineData);\r\n}\r\n\r\n// Mouse events\r\nlet current = {};\r\n\r\ncanvas.addEventListener('mousedown', e => {\r\n  drawing = true;\r\n  current.x = e.offsetX;\r\n  current.y = e.offsetY;\r\n});\r\n\r\ncanvas.addEventListener('mouseup', () => { drawing = false; });\r\ncanvas.addEventListener('mouseout', () => { drawing = false; });\r\n\r\ncanvas.addEventListener('mousemove', e => {\r\n  if (!drawing) return;\r\n  drawLine(current.x, current.y, e.offsetX, e.offsetY);\r\n  current.x = e.offsetX;\r\n  current.y = e.offsetY;\r\n});\r\n\r\n// Listen to Firebase for new lines\r\nonValue(ref(database, 'whiteboard/last_line'), (snapshot) => {\r\n  const data = snapshot.val();\r\n  if (data) {\r\n    drawLine(data.x0, data.y0, data.x1, data.y1, data.color, false);\r\n  }\r\n});\r\n\r\n// Clear whiteboard\r\nwindow.clearWhiteboard = () => {\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  set(ref(database, 'whiteboard/last_line'), {});\r\n};\r\n"],"names":[],"mappings":";;;AAGA,MAAM,cAAc,GAAG;AACvB,EAAE,MAAM,EAAE,yCAAyC;AACnD,EAAE,UAAU,EAAE,2CAA2C;AACzD,EAAE,WAAW,EAAE,qFAAqF;AACpG,EAAE,SAAS,EAAE,2BAA2B;AACxC,EAAE,aAAa,EAAE,uCAAuC;AACxD,EAAE,iBAAiB,EAAE,cAAc;AACnC,EAAE,KAAK,EAAE,2CAA2C;AACpD,EAAE,aAAa,EAAE,cAAc;AAC/B,CAAC,CAAC;AACF;AACA,MAAM,GAAG,GAAG,aAAa,CAAC,cAAc,CAAC,CAAC;AAC1C,MAAM,QAAQ,GAAG,WAAW,CAAC,GAAG,CAAC;;ACbjC,MAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;AAC3D,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;AACpC,IAAI,OAAO,GAAG,KAAK,CAAC;AACpB;AACA;AACA,SAAS,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,GAAG,OAAO,EAAE,IAAI,GAAG,IAAI,EAAE;AAChE,EAAE,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC;AAC1B,EAAE,GAAG,CAAC,SAAS,EAAE,CAAC;AAClB,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACrB,EAAE,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACrB,EAAE,GAAG,CAAC,MAAM,EAAE,CAAC;AACf,EAAE,GAAG,CAAC,SAAS,EAAE,CAAC;AAClB;AACA,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO;AACpB;AACA,EAAE,MAAM,QAAQ,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC;AAC7C,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,sBAAsB,CAAC,EAAE,QAAQ,CAAC,CAAC;AACvD,CAAC;AACD;AACA;AACA,IAAI,OAAO,GAAG,EAAE,CAAC;AACjB;AACA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,IAAI;AAC1C,EAAE,OAAO,GAAG,IAAI,CAAC;AACjB,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AACxB,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AACxB,CAAC,CAAC,CAAC;AACH;AACA,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,MAAM,EAAE,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAM,EAAE,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE;AACA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC,IAAI;AAC1C,EAAE,IAAI,CAAC,OAAO,EAAE,OAAO;AACvB,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;AACvD,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AACxB,EAAE,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;AACxB,CAAC,CAAC,CAAC;AACH;AACA;AACA,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,sBAAsB,CAAC,EAAE,CAAC,QAAQ,KAAK;AAC7D,EAAE,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;AAC9B,EAAE,IAAI,IAAI,EAAE;AACZ,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AACpE,EAAE,CAAC;AACH,CAAC,CAAC,CAAC;AACH;AACA;AACA,MAAM,CAAC,eAAe,GAAG,MAAM;AAC/B,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;AACnD,EAAE,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,sBAAsB,CAAC,EAAE,EAAE,CAAC,CAAC;AACjD,CAAC"}